# ============================================
# REQUIRED ENVIRONMENT VARIABLES
# ============================================

# Better Auth (minimum 32 characters)
AUTH_SECRET=your-secret-key-at-least-32-characters-long

# Database
DATABASE_URL=postgresql://user:password@localhost:5432/timetracker

# ============================================
# OPTIONAL ENVIRONMENT VARIABLES
# ============================================

# Redis (optional, recommended for production)
REDIS_URL=redis://localhost:6379

# Email Verification (optional feature)
# Set ENABLE_EMAIL_VERIFICATION=true to enable email verification for new users
# If enabled, users must verify their email before they can sign in
ENABLE_EMAIL_VERIFICATION=false

# Loops.js Email Service (optional, required if email verification is enabled)
# Get your API key from https://loops.so
LOOPS_API_KEY=

# Custom Email Template ID (optional, uses default if not set)
# Create a custom verification email template in Loops.js and use its ID here
LOOPS_EMAIL_VERIFICATION_TEMPLATE_ID=

# Seed User ID
# This is the user ID that will be used to seed the database with sample data
SEED_USER_ID=test-user-123

# External Authentication Configuration Examples

# ============================================================================
# EXTERNAL AUTH MODE
# ============================================================================

# Options: "better-auth", "proxy", "disabled"
EXTERNAL_AUTH_MODE=disabled

# Provider selection (better-auth mode only)
# Options: "google", "github", "entra", "custom"
#EXTERNAL_AUTH_PROVIDER=google

# --- Google OAuth ---
# Create credentials: https://console.cloud.google.com/
# Redirect URI: https://your-domain.com/api/auth/callback/google
#OAUTH_GOOGLE_CLIENT_ID=123456789-abcdef.apps.googleusercontent.com
#OAUTH_GOOGLE_CLIENT_SECRET=GOCSPX-your-secret-here

# --- GitHub OAuth ---
# Create OAuth App: https://github.com/settings/developers
# Callback URL: https://your-domain.com/api/auth/callback/github
#OAUTH_GITHUB_CLIENT_ID=Iv1.1234567890abcdef
#OAUTH_GITHUB_CLIENT_SECRET=your-github-client-secret

# --- Microsoft Entra ID (Azure AD) ---
# Register app: https://portal.azure.com/
# Redirect URI: https://your-domain.com/api/auth/callback/microsoft-entra-id
#OAUTH_ENTRA_CLIENT_ID=12345678-1234-1234-1234-123456789abc
#OAUTH_ENTRA_CLIENT_SECRET=your-entra-secret
#OAUTH_ENTRA_TENANT_ID=your-tenant-id

# --- Custom OIDC Provider ---
# For any OAuth 2.0 / OpenID Connect provider
#OAUTH_CUSTOM_AUTHORIZATION_URL=https://provider.com/oauth/authorize
#OAUTH_CUSTOM_TOKEN_URL=https://provider.com/oauth/token
#OAUTH_CUSTOM_USERINFO_URL=https://provider.com/oauth/userinfo
#OAUTH_CUSTOM_CLIENT_ID=your-client-id
#OAUTH_CUSTOM_CLIENT_SECRET=your-client-secret

# ============================================================================
# PROXY MODE
# ============================================================================

# Header names (defaults shown, customize if your proxy uses different headers)
#PROXY_USER_HEADER=x-auth-request-user
#PROXY_EMAIL_HEADER=x-auth-request-email
#PROXY_JWT_HEADER=x-auth-request-jwt

# JWT Verification

# Option 1: JWKS URL (recommended for production)
# The proxy should expose a JWKS endpoint with public keys
#PROXY_JWT_JWKS_URL=https://your-proxy.com/.well-known/jwks.json

# Option 2: Static Public Key (PEM format)
# Use this if proxy signs JWTs with a static key pair
#PROXY_JWT_PUBLIC_KEY="-----BEGIN PUBLIC KEY-----
#MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA...
#-----END PUBLIC KEY-----"

# JWT Claims Validation (recommended)
#PROXY_JWT_ISSUER=https://your-proxy.com
#PROXY_JWT_AUDIENCE=timetracker-mcp

# ============================================================================
# EXTERNAL AUTH POLICIES
# ============================================================================

# Auto-create local user on first external login
# true: Create new user automatically (recommended)
# false: Only allow login for existing users
EXTERNAL_CREATE_LOCAL_USER=true

# Account linking policy
# auto: Automatically link external accounts by matching email (recommended)
# require-manual-link: Users must manually link accounts via UI
EXTERNAL_LINKING_POLICY=auto
